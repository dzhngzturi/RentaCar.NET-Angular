"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[618],{9618:(R,v,n)=>{n.r(v),n.d(v,{AccountModule:()=>c});var d=n(6895),a=n(9838),r=n(4006),t=n(1571),h=n(1044),Z=n(7185),b=n(4015);class m{constructor(e,o,i){this.accountService=e,this.fb=o,this.toastr=i}ngOnInit(){this.createRegisterForm()}createRegisterForm(){this.forgotPasswordForm=this.fb.group({email:[null,[r.kI.required,r.kI.pattern("^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$")]]})}onSubmit(){this.accountService.forgotPassword(this.forgotPasswordForm.value).subscribe(()=>{this.toastr.success("Email sent")},e=>{console.log(e)})}}m.\u0275fac=function(e){return new(e||m)(t.Y36(h.B),t.Y36(r.qu),t.Y36(Z._W))},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-forgotpassword"]],decls:18,vars:3,consts:[[1,"container"],[1,"row"],[1,"col-md-3"],[1,"col-md-6"],[3,"formGroup","ngSubmit"],[1,"mt-5"],["size","10","color","black"],[1,"mb-3"],["formControlName","email",3,"label"],["type","button","routerLink","/account/login",1,"btn","btn-outline-secondary",2,"float","left"],["type","submit",1,"btn","btn-primary","ml-2",3,"disabled"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"div",3)(4,"form",4),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(5,"h3",5)(6,"strong"),t._uU(7,"Forgot your password? "),t.qZA()(),t._UZ(8,"hr",6),t.TgZ(9,"h5"),t._uU(10,"Please enter your email addres"),t.qZA(),t.TgZ(11,"div",7),t._UZ(12,"app-text-input",8),t.qZA(),t.TgZ(13,"button",9),t._uU(14,"Cancel"),t.qZA(),t.TgZ(15,"button",10),t._uU(16,"Submit"),t.qZA()()(),t._UZ(17,"div",2),t.qZA()()),2&e&&(t.xp6(4),t.Q6J("formGroup",o.forgotPasswordForm),t.xp6(8),t.Q6J("label","Email Address"),t.xp6(3),t.Q6J("disabled",o.forgotPasswordForm.invalid))},dependencies:[a.rH,r._Y,r.JJ,r.JL,r.sg,r.u,b.t]});var F=n(5861),y=n(4707),x=n(3279);class p{constructor(e,o,i,l,w){this.accountService=e,this.router=o,this.activatedRoute=i,this.socialAuthService=l,this._ngZone=w,this.currentUserSource=new y.t(1),this.currentUser$=this.currentUserSource.asObservable(),this.isAdminSource=new y.t,this.isAdmin$=this.isAdminSource.asObservable()}ngOnInit(){this.returnUrl=this.activatedRoute.snapshot.queryParams.returnUrl||"/car",this.createLoginForm(),google.accounts.id.initialize({client_id:"12345678890-kt1f1gm4mnr269uitasa37afa1q2ue7.apps.googleusercontent.com",callback:this.handleCredentialResponse.bind(this),auto_select:!1,cancel_on_tap_outside:!0}),google.accounts.id.renderButton(document.getElementById("google-button"),{theme:"outline",size:"large",width:"100%"}),google.accounts.id.prompt(e=>{})}createLoginForm(){this.loginForm=new r.cw({email:new r.NI("",[r.kI.required,r.kI.pattern("^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$")]),password:new r.NI("",r.kI.required)})}onSubmit(){this.accountService.login(this.loginForm.value).subscribe(()=>{this.router.navigateByUrl(this.returnUrl)},e=>{console.log(e)})}handleCredentialResponse(e){var o=this;return(0,F.Z)(function*(){yield o.accountService.loginWithGoogle(e.credential).subscribe(()=>{o._ngZone.run(()=>{o.router.navigateByUrl("/")})},i=>{console.log(i)}),console.log(e.credential)})()}}p.\u0275fac=function(e){return new(e||p)(t.Y36(h.B),t.Y36(a.F0),t.Y36(a.gz),t.Y36(x.xE),t.Y36(t.R0b))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-login"]],decls:13,vars:4,consts:[[1,"d-flex","justify-content-center","mt-5"],[1,"col-3"],[3,"formGroup","ngSubmit"],[1,"mb-4","text-center"],[1,"h3","mb-3","fw-normal"],["formControlName","email",3,"label"],["formControlName","password","type","password",3,"label"],["id","google-button"],["type","submit",1,"w-100","btn","btn-lg","btn-success",3,"disabled"],["routerLink","/account/forgotpassword",1,"link-secondary"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(3,"div",3)(4,"h1",4),t._uU(5,"Login"),t.qZA()(),t._UZ(6,"app-text-input",5)(7,"app-text-input",6)(8,"div",7),t.TgZ(9,"button",8),t._uU(10,"Sign in"),t.qZA()(),t.TgZ(11,"a",9),t._uU(12,"Forgot Password?"),t.qZA()()()),2&e&&(t.xp6(2),t.Q6J("formGroup",o.loginForm),t.xp6(4),t.Q6J("label","Email Address"),t.xp6(1),t.Q6J("label","Password"),t.xp6(2),t.Q6J("disabled",o.loginForm.invalid))},dependencies:[a.rH,r._Y,r.JJ,r.JL,r.sg,r.u,b.t]});var U=n(5963),S=n(3900),T=n(9646),J=n(4004);function C(s,e){if(1&s&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&s){const o=e.$implicit;t.xp6(1),t.hij(" ",o," ")}}function A(s,e){if(1&s&&(t.TgZ(0,"ul",10),t.YNc(1,C,2,1,"li",11),t.qZA()),2&s){const o=t.oxw();t.xp6(1),t.Q6J("ngForOf",o.errors)}}class g{constructor(e,o,i){this.fb=e,this.accountService=o,this.router=i}ngOnInit(){this.createRegisterForm()}createRegisterForm(){this.registerForm=this.fb.group({displayName:[null,[r.kI.required]],email:[null,[r.kI.required,r.kI.pattern("^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$")],[this.validateEmailNotTaken()]],password:[null,[r.kI.required]]})}onSubmit(){this.accountService.register(this.registerForm.value).subscribe(e=>{this.router.navigateByUrl("/car")},e=>{console.log(e),this.errors=e.errors})}validateEmailNotTaken(){return e=>(0,U.H)(500).pipe((0,S.w)(()=>e.value?this.accountService.checkEmailExists(e.value).pipe((0,J.U)(o=>o?{emailExists:!0}:null)):(0,T.of)(null)))}}function P(s,e){if(1&s&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&s){const o=e.$implicit;t.xp6(1),t.hij(" ",o," ")}}function I(s,e){if(1&s&&(t.TgZ(0,"ul",10),t.YNc(1,P,2,1,"li",11),t.qZA()),2&s){const o=t.oxw();t.xp6(1),t.Q6J("ngForOf",o.errors)}}g.\u0275fac=function(e){return new(e||g)(t.Y36(r.qu),t.Y36(h.B),t.Y36(a.F0))},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-register"]],decls:12,vars:6,consts:[[1,"d-flex","justify-content-center","mt-5"],[1,"col-3"],[3,"formGroup","ngSubmit"],[1,"mb-4","text-center"],[1,"h3","mb-3","fw-normal"],["formControlName","displayName",3,"label"],["formControlName","email",3,"label"],["formControlName","password","type","password",3,"label"],["class","text-danger list-unstyled",4,"ngIf"],["type","submit",1,"w-100","btn","btn-lg","btn-success",3,"disabled"],[1,"text-danger","list-unstyled"],[4,"ngFor","ngForOf"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(3,"div",3)(4,"h1",4),t._uU(5,"Register"),t.qZA()(),t._UZ(6,"app-text-input",5)(7,"app-text-input",6)(8,"app-text-input",7),t.YNc(9,A,2,1,"ul",8),t.TgZ(10,"button",9),t._uU(11,"Register "),t.qZA()()()()),2&e&&(t.xp6(2),t.Q6J("formGroup",o.registerForm),t.xp6(4),t.Q6J("label","Display Name"),t.xp6(1),t.Q6J("label","Email Address"),t.xp6(1),t.Q6J("label","Password"),t.xp6(1),t.Q6J("ngIf",o.errors),t.xp6(1),t.Q6J("disabled",o.registerForm.invalid))},dependencies:[d.sg,d.O5,r._Y,r.JJ,r.JL,r.sg,r.u,b.t]});class f{constructor(e,o,i,l,w){this.accountService=e,this.toastr=o,this.route=i,this.router=l,this.fb=w,this.userid="",this.resettoken="",this.errorMessage="",this.updatePasswordForm=this.fb.group({password:[null,[r.kI.required]],confirmPassword:[null,[r.kI.required]]})}ngOnInit(){}onSubmit(){this.route.params.subscribe(l=>{this.userid=l.userId,this.resettoken=l.resetToken});const e=this.updatePasswordForm.getRawValue(),o=e.password,i=e.confirmPassword;o===i?this.accountService.resetPassword(this.userid,this.resettoken,o,i).subscribe(()=>{this.toastr.success("Password updated successfully"),this.router.navigateByUrl("/account/login")},l=>{console.log(l),this.errors=l.errors}):(console.log("password not match"),this.errorMessage="Password not match")}}f.\u0275fac=function(e){return new(e||f)(t.Y36(h.B),t.Y36(Z._W),t.Y36(a.gz),t.Y36(a.F0),t.Y36(r.qu))},f.\u0275cmp=t.Xpm({type:f,selectors:[["app-update-password"]],decls:13,vars:6,consts:[[1,"d-flex","justify-content-center","mt-5"],[1,"col-3"],[3,"formGroup","ngSubmit"],[1,"mb-4","text-center"],[1,"h3","mb-3","fw-normal"],["formControlName","password","type","password",3,"label"],["formControlName","confirmPassword","type","password",3,"label"],[1,"text-danger"],["class","text-danger list-unstyled",4,"ngIf"],["type","submit",1,"w-100","btn","btn-lg","btn-success",3,"disabled"],[1,"text-danger","list-unstyled"],[4,"ngFor","ngForOf"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(3,"div",3)(4,"h1",4),t._uU(5,"Update Password"),t.qZA()(),t._UZ(6,"app-text-input",5)(7,"app-text-input",6),t.TgZ(8,"div",7),t._uU(9),t.qZA(),t.YNc(10,I,2,1,"ul",8),t.TgZ(11,"button",9),t._uU(12,"Update "),t.qZA()()()()),2&e&&(t.xp6(2),t.Q6J("formGroup",o.updatePasswordForm),t.xp6(4),t.Q6J("label","Password"),t.xp6(1),t.Q6J("label","Confirm Password"),t.xp6(2),t.hij(" ",o.errorMessage," "),t.xp6(1),t.Q6J("ngIf",o.errors),t.xp6(1),t.Q6J("disabled",o.updatePasswordForm.invalid))},dependencies:[d.sg,d.O5,r._Y,r.JJ,r.JL,r.sg,r.u,b.t]});const Y=[{path:"login",component:p},{path:"register",component:g},{path:"forgotpassword",component:m,data:{breadcrumb:"ForgotPassword"}},{path:"update-password/:userId/:resetToken",component:f,data:{breadcrumb:"UpdatePassword"}}];class u{}u.\u0275fac=function(e){return new(e||u)},u.\u0275mod=t.oAB({type:u}),u.\u0275inj=t.cJS({imports:[a.Bz.forChild(Y),a.Bz]});var N=n(4466);class c{}c.\u0275fac=function(e){return new(e||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[d.ez,u,N.m]})}}]);