"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[310],{4310:(Pe,N,c)=>{c.r(N),c.d(N,{AdminModule:()=>f});var d=c(6895),P=c(4466),p=c(9838),e=c(1571),g=c(3412),I=c(1135),k=c(2340),F=c(529);class u{constructor(n){this.http=n,this.baseUrl=k.N.apiUrl,this.checkReturned=new I.X(null),this.check$=this.checkReturned.asObservable()}createCar(n){return this.http.post(this.baseUrl+"Cars",n)}updateCar(n,t){return this.http.put(this.baseUrl+"Cars/"+t,n)}deleteCar(n){return this.http.delete(this.baseUrl+"Cars/"+n)}createType(n){return this.http.post(this.baseUrl+"Cars/types",n)}updateType(n,t){return this.http.put(this.baseUrl+"Cars/"+t+"/types",n)}deleteType(n){return this.http.delete(this.baseUrl+"Cars/"+n+"/types")}createBrand(n){return this.http.post(this.baseUrl+"Cars/brands",n)}updateBrand(n,t){return this.http.put(this.baseUrl+"Cars/"+t+"/brands",n)}deleteBrand(n){return this.http.delete(this.baseUrl+"Cars/"+n+"/brands")}uploadImage(n,t){const i=new FormData;return i.append("photo",n,"image.png"),this.http.put(this.baseUrl+"Cars/"+t+"/photo",i,{reportProgress:!0,observe:"events"})}deleteCarPhoto(n,t){return this.http.delete(this.baseUrl+"Cars/"+t+"/photo/"+n)}setMainPhoto(n,t){return this.http.post(this.baseUrl+"Cars/"+t+"/photo/"+n,{})}getOrdersForAdmin(){return this.http.get(this.baseUrl+"orders/getOrdersForAdmin")}getOrderDetailedForAdmin(n){return this.http.get(this.baseUrl+"orders/getOrderForAdmin/"+n)}checkCarReturned(n,t){return this.http.put(this.baseUrl+"Orders/checkCarReturned?id="+n+"&returned="+t,{})}setReturned(n,t){return this.http.put(this.baseUrl+"Orders/checkCarReturned?id="+n+"&returned="+t,{}).subscribe(i=>{console.log(t),this.checkReturned.next(i)},i=>{console.log(i)})}}u.\u0275fac=function(n){return new(n||u)(e.LFG(F.eN))},u.\u0275prov=e.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"});var S=c(1654),J=c(6241);const Q=function(r){return["edit",r]};function Y(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td",24),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"div",25),e._UZ(5,"img",26),e.qZA()(),e.TgZ(6,"th",24)(7,"h5"),e._uU(8),e.qZA()(),e.TgZ(9,"td",24),e._uU(10),e.ALo(11,"currency"),e.qZA(),e.TgZ(12,"td",24)(13,"button",27),e._uU(14,"Edit"),e.qZA()(),e.TgZ(15,"td",24)(16,"button",28),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.deleteCar(a.id))}),e._uU(17,"Delete"),e.qZA()()()}if(2&r){const t=n.$implicit;e.xp6(2),e.Oqu(t.id),e.xp6(3),e.s9C("src",t.pictureUrl||"/assets/images/placeholder.png",e.LSH),e.s9C("alt",t.name),e.xp6(3),e.Oqu(t.name),e.xp6(2),e.Oqu(e.lcZ(11,6,t.price)),e.xp6(3),e.Q6J("routerLink",e.VKq(8,Q,t.id))}}function L(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",29)(1,"app-pager",30),e.NdJ("pageChanged",function(o){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onPageChanged(o))}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("pageSize",t.shopParams.pageSize)("pageNumber",t.shopParams.pageNumber)("totalCount",t.totalCount)}}const B=function(){return["/admin/carcreate"]},D=function(){return["/admin/type"]},z=function(){return["/admin/brand"]};function R(r,n){if(1&r&&(e.TgZ(0,"section",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"nav",5)(5,"button",6),e._UZ(6,"span",7),e.qZA()(),e.TgZ(7,"div",8)(8,"div",9)(9,"header",10),e._uU(10,"Menu"),e.qZA()(),e.TgZ(11,"section",11)(12,"div",12)(13,"button",13),e._uU(14,"Create new car"),e.qZA(),e.TgZ(15,"button",13),e._uU(16,"Create new type"),e.qZA(),e.TgZ(17,"button",13),e._uU(18,"Create new brand"),e.qZA()()()()(),e.TgZ(19,"div",14)(20,"div",15)(21,"header",10),e._uU(22,"Car List"),e.qZA()(),e._UZ(23,"app-paging-header",16),e.TgZ(24,"div",17)(25,"table",18)(26,"thead")(27,"tr")(28,"th",19)(29,"div"),e._uU(30,"Id"),e.qZA()(),e.TgZ(31,"th",19)(32,"div",20),e._uU(33,"Car"),e.qZA()(),e.TgZ(34,"th",19)(35,"div",20),e._uU(36,"Name"),e.qZA()(),e.TgZ(37,"th",19)(38,"div",21),e._uU(39,"Price"),e.qZA()(),e.TgZ(40,"th",19)(41,"div",21),e._uU(42,"Edit"),e.qZA()(),e.TgZ(43,"th",19)(44,"div",21),e._uU(45,"Delete"),e.qZA()()()(),e.TgZ(46,"tbody"),e.YNc(47,Y,18,10,"tr",22),e.qZA()()(),e.YNc(48,L,2,3,"div",23),e.qZA()()()()),2&r){const t=e.oxw();e.xp6(13),e.Q6J("routerLink",e.DdM(8,B)),e.xp6(2),e.Q6J("routerLink",e.DdM(9,D)),e.xp6(2),e.Q6J("routerLink",e.DdM(10,z)),e.xp6(6),e.Q6J("totalCount",t.totalCount)("pageSize",t.shopParams.pageSize)("pageNumber",t.shopParams.pageNumber),e.xp6(24),e.Q6J("ngForOf",t.cars),e.xp6(1),e.Q6J("ngIf",t.totalCount>0)}}class v{constructor(n,t){this.shopService=n,this.adminService=t,this.shopParams=this.shopService.getShopParams()}ngOnInit(){this.getCars()}getCars(n=!1){this.shopService.getCars(n).subscribe(t=>{this.cars=t.data,this.totalCount=t.count},t=>{console.log(t)})}onPageChanged(n){const t=this.shopService.getShopParams();t.pageNumber!==n&&(t.pageNumber=n,this.shopService.setShopParams(t),this.getCars(!0))}deleteCar(n){this.adminService.deleteCar(n).subscribe(t=>{this.cars.splice(this.cars.findIndex(i=>i.id===n),1),this.totalCount--})}}v.\u0275fac=function(n){return new(n||v)(e.Y36(g.d),e.Y36(u))},v.\u0275cmp=e.Xpm({type:v,selectors:[["app-admin"]],decls:1,vars:1,consts:[["class","admin-page",4,"ngIf"],[1,"admin-page"],[1,"container","ml-3"],[1,"row"],[1,"col-lg-3"],[1,"navbar","navbar-dark","bg-dark"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarToggleExternalContent","aria-controls","navbarToggleExternalContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarToggleExternalContent",1,"collapse"],[1,"d-flex","justify-content-between","mt-3","mb-4"],[1,"h2"],[1,"d-flex","justify-content-between","mr-5"],[1,"btn-groups"],[1,"btn","btn-outline-success",3,"routerLink"],[1,"col-lg-9"],[1,"d-flex","justify-content-between","my-3"],[3,"totalCount","pageSize","pageNumber"],[1,"table-responsive"],[1,"table"],["scope","col"],[1,"text-uppercase"],[1,"p-2","px-3","text-uppercase"],[4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"align-middle"],["id","carUrl",1,"p-2"],[1,"img-fluid",2,"max-height","50px",3,"src","alt"],[1,"btn","btn-warning",3,"routerLink"],[1,"btn","btn-danger",3,"click"],[1,"d-flex","justify-content-center"],[3,"pageSize","pageNumber","totalCount","pageChanged"]],template:function(n,t){1&n&&e.YNc(0,R,49,11,"section",0),2&n&&e.Q6J("ngIf",t.cars)},dependencies:[d.sg,d.O5,S.U,J.P,p.rH,d.H9],styles:[".align-middle[_ngcontent-%COMP%]{text-align:center}td[_ngcontent-%COMP%]{padding:10px 0}th[_ngcontent-%COMP%]{text-align:center}#carUrl[_ngcontent-%COMP%]{margin-left:100px}.btn-groups[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#04aa6d;border:1px solid green;color:#fff;padding:10px;margin-top:10px;float:left;cursor:pointer;width:100%;height:50%;display:block}.btn-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){border-bottom:none}.btn-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#3e8e41}"]});var H=c(4128);class K{constructor(n){this.name="",this.pictureUrl="",this.year=0,this.fuel="",this.price=0,Object.assign(this,n)}}var w=c(9241),s=c(4006);function j(r,n){1&r&&(e.TgZ(0,"div"),e._uU(1," Car Name is required "),e.qZA())}function G(r,n){if(1&r&&(e.TgZ(0,"div",23),e.YNc(1,j,2,0,"div",24),e.qZA()),2&r){e.oxw();const t=e.MAs(7);e.xp6(1),e.Q6J("ngIf",t.errors.required)}}function $(r,n){1&r&&(e.TgZ(0,"div"),e._uU(1," car price is required "),e.qZA())}function V(r,n){1&r&&(e.TgZ(0,"div"),e._uU(1," car price needs to be decimal value "),e.qZA())}function X(r,n){1&r&&(e.TgZ(0,"div"),e._uU(1," car price must be greater than zero "),e.qZA())}function W(r,n){if(1&r&&(e.TgZ(0,"div",23),e.YNc(1,$,2,0,"div",24),e.YNc(2,V,2,0,"div",24),e.YNc(3,X,2,0,"div",24),e.qZA()),2&r){e.oxw();const t=e.MAs(13);e.xp6(1),e.Q6J("ngIf",t.errors.required),e.xp6(1),e.Q6J("ngIf",t.errors.pattern),e.xp6(1),e.Q6J("ngIf",t.errors.min)}}function ee(r,n){1&r&&(e.TgZ(0,"div"),e._uU(1," Fuel is required "),e.qZA())}function te(r,n){if(1&r&&(e.TgZ(0,"div",23),e.YNc(1,ee,2,0,"div",24),e.qZA()),2&r){e.oxw();const t=e.MAs(21);e.xp6(1),e.Q6J("ngIf",t.errors.required)}}function ne(r,n){1&r&&(e.TgZ(0,"div"),e._uU(1," Year is required "),e.qZA())}function re(r,n){if(1&r&&(e.TgZ(0,"div",23),e.YNc(1,ne,2,0,"div",24),e.qZA()),2&r){e.oxw();const t=e.MAs(27);e.xp6(1),e.Q6J("ngIf",t.errors.required)}}function ie(r,n){if(1&r&&(e.TgZ(0,"option",25),e._uU(1),e.qZA()),2&r){const t=n.$implicit,i=e.oxw();e.Q6J("selected",i.car.carBrandId===t.id)("ngValue",t.id),e.xp6(1),e.Oqu(t.name)}}function oe(r,n){if(1&r&&(e.TgZ(0,"option",25),e._uU(1),e.qZA()),2&r){const t=n.$implicit,i=e.oxw();e.Q6J("selected",i.car.carTypeId===t.id)("ngValue",t.id),e.xp6(1),e.Oqu(t.name)}}const M=function(r){return{"is-invalid":r}};class Z{constructor(n,t,i,o){this.route=n,this.adminService=t,this.router=i,this.shopService=o}ngOnInit(){}updatePrice(n){this.car.price=n}onSubmit(n){if("edit"===this.route.snapshot.url[0].path){const t={...this.car,...n,price:+n.price};this.adminService.updateCar(t,+this.route.snapshot.paramMap.get("id")).subscribe(i=>{this.router.navigate(["/admin"])})}else{const t={...n,price:+n.price};this.adminService.createCar(t).subscribe(i=>{this.router.navigate(["/admin"])})}}}Z.\u0275fac=function(n){return new(n||Z)(e.Y36(p.gz),e.Y36(u),e.Y36(p.F0),e.Y36(g.d))},Z.\u0275cmp=e.Xpm({type:Z,selectors:[["app-edit-car-form"]],inputs:{car:"car",brands:"brands",types:"types"},decls:42,vars:28,consts:[[3,"ngSubmit"],["carForm","ngForm"],[1,"form-row"],[1,"form-group","col-md-6"],["for","name"],["required","","type","text","id","name","placeholder","Car Name","name","name",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["name","ngModel"],["class","invalid-feedback",4,"ngIf"],["for","price"],["required","","type","text","id","price","placeholder","Price","currencyMask","","name","price","pattern","^\\$?([0-9]{1,3},([0-9]{3},)*[0-9]{3}|[0-9]+)(\\.[0-9][0-9])?$","min","0.01",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["price","ngModel"],["for","fuel"],["required","","type","text","id","fuel","placeholder","Fuel","name","fuel",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["fuel","ngModel"],["for","Year"],["required","","id","year","placeholder","Year","type","text","name","year",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["year","ngModel"],["for","brand"],["id","brand","name","carBrandId","required","",1,"form-control",3,"ngModel","ngModelChange"],[3,"selected","ngValue",4,"ngFor","ngForOf"],["for","type"],["id","type","name","carTypeId","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary","my-3","float-right",3,"disabled"],[1,"invalid-feedback"],[4,"ngIf"],[3,"selected","ngValue"]],template:function(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){e.CHM(i);const a=e.MAs(1);return e.KtG(t.onSubmit(a.valid&&a.value))}),e.TgZ(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5,"Car Name"),e.qZA(),e.TgZ(6,"input",5,6),e.NdJ("ngModelChange",function(a){return t.car.name=a}),e.qZA(),e.YNc(8,G,2,1,"div",7),e.qZA(),e.TgZ(9,"div",3)(10,"label",8),e._uU(11,"Price"),e.qZA(),e.TgZ(12,"input",9,10),e.NdJ("ngModelChange",function(a){return t.updatePrice(+a)}),e.ALo(14,"number"),e.qZA(),e.YNc(15,W,4,3,"div",7),e.qZA()(),e.TgZ(16,"div",2)(17,"div",3)(18,"label",11),e._uU(19,"Fuel"),e.qZA(),e.TgZ(20,"input",12,13),e.NdJ("ngModelChange",function(a){return t.car.fuel=a}),e.qZA(),e.YNc(22,te,2,1,"div",7),e.qZA(),e.TgZ(23,"div",3)(24,"label",14),e._uU(25,"Year"),e.qZA(),e.TgZ(26,"input",15,16),e.NdJ("ngModelChange",function(a){return t.car.year=a}),e.qZA(),e.YNc(28,re,2,1,"div",7),e.qZA()(),e.TgZ(29,"div",2)(30,"div",3)(31,"label",17),e._uU(32,"Brand"),e.qZA(),e.TgZ(33,"select",18),e.NdJ("ngModelChange",function(a){return t.car.carBrandId=a}),e.YNc(34,ie,2,3,"option",19),e.qZA()(),e.TgZ(35,"div",3)(36,"label",20),e._uU(37,"Type"),e.qZA(),e.TgZ(38,"select",21),e.NdJ("ngModelChange",function(a){return t.car.carTypeId=a}),e.YNc(39,oe,2,3,"option",19),e.qZA()()(),e.TgZ(40,"button",22),e._uU(41,"Submit"),e.qZA()()}if(2&n){const i=e.MAs(1),o=e.MAs(7),a=e.MAs(13),l=e.MAs(21),C=e.MAs(27);e.xp6(6),e.Q6J("ngClass",e.VKq(20,M,o.invalid&&(o.dirty||o.touched)))("ngModel",t.car.name),e.xp6(2),e.Q6J("ngIf",o.invalid&&(o.dirty||o.touched)),e.xp6(4),e.Q6J("ngClass",e.VKq(22,M,a.invalid&&(a.dirty||a.touched)))("ngModel",e.xi3(14,17,+t.car.price,"1.2-2")),e.xp6(3),e.Q6J("ngIf",a.invalid&&(a.dirty||a.touched)),e.xp6(5),e.Q6J("ngClass",e.VKq(24,M,l.invalid&&(l.dirty||l.touched)))("ngModel",t.car.fuel),e.xp6(2),e.Q6J("ngIf",l.invalid&&(l.dirty||l.touched)),e.xp6(4),e.Q6J("ngClass",e.VKq(26,M,C.invalid&&(C.dirty||C.touched)))("ngModel",t.car.year),e.xp6(2),e.Q6J("ngIf",C.invalid&&(C.dirty||C.touched)),e.xp6(5),e.Q6J("ngModel",t.car.carBrandId),e.xp6(1),e.Q6J("ngForOf",t.brands),e.xp6(4),e.Q6J("ngModel",t.car.carTypeId),e.xp6(1),e.Q6J("ngForOf",t.types),e.xp6(1),e.Q6J("disabled",!i.valid)}},dependencies:[d.mk,d.sg,d.O5,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.Q7,s.c5,s.On,s.F,d.JJ]});var ae=c(7185),O=c(1208),E=c(1894);function se(r,n){if(1&r){const t=e.EpF();e.ynx(0),e._UZ(1,"img",8),e.TgZ(2,"div",9)(3,"button",10),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onUpload())}),e._uU(4,"Upload Image"),e.qZA()(),e.BQk()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("src",t.croppedImage,e.LSH)}}class T{constructor(){this.files=[],this.imageChangedEvent="",this.croppedImage="",this.addFile=new e.vpe}ngOnInit(){}fileChangeEvent(n){this.imageChangedEvent=n}imageCropped(n){this.croppedImage=n.base64}onSelect(n){this.files=[],this.files.push(...n.addedFiles),this.fileChangeEvent(this.files[0])}onUpload(){console.log((0,O.Ll)(this.croppedImage)),this.addFile.emit((0,O.Ll)(this.croppedImage))}}function de(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",7)(1,"div",8),e._UZ(2,"img",9),e.TgZ(3,"div",10)(4,"button",11),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.setMain(a.id))}),e._uU(5,"Set Main "),e.qZA(),e.TgZ(6,"button",12),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.deletePhoto(a.id))}),e._UZ(7,"i",13),e.qZA()()()()}if(2&r){const t=n.$implicit;e.xp6(2),e.s9C("src",t.pictureUrl,e.LSH),e.s9C("alt",t.fileName),e.xp6(2),e.Tol(t.isMain?"btn btn-success":"btn btn-outline-success"),e.Q6J("disabled",t.isMain),e.xp6(2),e.Q6J("disabled",t.isMain)}}function ce(r,n){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",3)(2,"h3"),e._uU(3,"Car Photos"),e.qZA(),e.TgZ(4,"button",4),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.addPhotoModeToggle())}),e._uU(5," Add New Photo "),e.qZA()(),e.TgZ(6,"div",5),e.YNc(7,de,8,7,"div",6),e.qZA(),e.BQk()}if(2&r){const t=e.oxw();e.xp6(7),e.Q6J("ngForOf",null==t.car?null:t.car.photos)}}function pe(r,n){if(1&r&&(e.TgZ(0,"div",18)(1,"div",19),e._uU(2),e.qZA()()),2&r){const t=e.oxw(2);e.xp6(1),e.Udp("width",t.progress,"%"),e.xp6(1),e.hij(" ",t.progress,"% ")}}function le(r,n){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",3)(2,"h3",14),e._uU(3,"Add new car image"),e.qZA(),e.TgZ(4,"button",15),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.addPhotoModeToggle())}),e._uU(5,"Cancel"),e.qZA()(),e.YNc(6,pe,3,3,"div",16),e.TgZ(7,"app-photo-widget",17),e.NdJ("addFile",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.uploadFile(o))}),e.qZA(),e.BQk()}if(2&r){const t=e.oxw();e.xp6(6),e.Q6J("ngIf",t.progress>0)}}T.\u0275fac=function(n){return new(n||T)},T.\u0275cmp=e.Xpm({type:T,selectors:[["app-photo-widget"]],outputs:{addFile:"addFile"},decls:18,vars:5,consts:[[1,"container"],[1,"row"],[1,"col-4"],["ngx-dropzone","",1,"custom-dropzone",3,"change"],[1,"fa","fa-upload","fa-4x"],[1,"col-4","img-preview"],["format","png",1,"img-fluid",3,"imageChangedEvent","imageFile","maintainAspectRatio","aspectRatio","imageCropped"],[4,"ngIf"],[1,"img-fluid",3,"src"],[1,"mt-4"],[1,"btn-block","btn-success",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),e._uU(4,"Step 1 - Add Photo"),e.qZA(),e.TgZ(5,"div",3),e.NdJ("change",function(o){return t.onSelect(o)}),e.TgZ(6,"ngx-dropzone-label"),e._UZ(7,"i",4),e.TgZ(8,"h4"),e._uU(9,"Drop image here"),e.qZA()()()(),e.TgZ(10,"div",5)(11,"h3"),e._uU(12,"Step 2 - Resize image"),e.qZA(),e.TgZ(13,"image-cropper",6),e.NdJ("imageCropped",function(o){return t.imageCropped(o)}),e.qZA()(),e.TgZ(14,"div",2)(15,"h3"),e._uU(16,"Step 3 - Preview & Upload"),e.qZA(),e.YNc(17,se,5,1,"ng-container",7),e.qZA()()()),2&n&&(e.xp6(13),e.Q6J("imageChangedEvent",t.imageChangedEvent)("imageFile",t.files[0])("maintainAspectRatio",!0)("aspectRatio",1),e.xp6(4),e.Q6J("ngIf",t.croppedImage))},dependencies:[d.O5,E._f,E.NP,O.ap],styles:[".custom-dropzone[_ngcontent-%COMP%]{border:3px dashed #eee;border-radius:5px;padding-top:30px;text-align:center;height:200px}.custom-dropzone.ngx-dz-hovered[_ngcontent-%COMP%]{border:3px solid green}"]});class x{constructor(n,t,i){this.router=n,this.adminService=t,this.toast=i,this.progress=0,this.addPhotoMode=!1}ngOnInit(){}addPhotoModeToggle(){this.addPhotoMode=!this.addPhotoMode}uploadFile(n){this.adminService.uploadImage(n,this.car.id).subscribe(t=>{switch(t.type){case F.dt.UploadProgress:this.progress=Math.round(t.loaded/t.total*100);break;case F.dt.Response:this.car=t.body,setTimeout(()=>{this.progress=0,this.addPhotoMode=!1},1500)}},t=>{this.toast.error(t.errors?t.errors[0]:"Problem uploading image"),this.progress=0})}deletePhoto(n){this.adminService.deleteCarPhoto(n,this.car.id).subscribe(()=>{const t=this.car.photos.findIndex(i=>i.id===n);this.car.photos.splice(t,1)},t=>{this.toast.error("Problem deleting photo"),console.log(t)})}setMain(n){this.adminService.setMainPhoto(n,this.car.id).subscribe(()=>{const t=this.car.photos.findIndex(i=>i.id==n);this.car.photos.splice(t,1),this.router.navigate(["/admin"])},t=>{this.toast.error("Problem setting main photo"),console.log(t)})}}x.\u0275fac=function(n){return new(n||x)(e.Y36(p.F0),e.Y36(u),e.Y36(ae._W))},x.\u0275cmp=e.Xpm({type:x,selectors:[["app-edit-car-photos"]],inputs:{car:"car"},decls:4,vars:2,consts:[[1,"py-5"],[1,"container"],[4,"ngIf"],[1,"d-flex","justify-content-between","mb-3"],[1,"btn","btn-primary",3,"click"],[1,"row"],["class","col-3",4,"ngFor","ngForOf"],[1,"col-3"],[1,"card"],["width","100%","height","225",1,"card-img-top",3,"src","alt"],[1,"btn-group",2,"width","100%"],["type","button",2,"width","50%",3,"disabled","click"],["type","button",1,"btn","btn-outline-danger",2,"width","50%",3,"disabled","click"],[1,"fa","fa-trash"],[1,"text-primary"],[1,"btn","btn-outline-secondary",3,"click"],["class","progress form-group",4,"ngIf"],[3,"addFile"],[1,"progress","form-group"],["role","progressbar",1,"progress-bar","progress-bar-striped","bg-success"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,ce,8,1,"ng-container",2),e.YNc(3,le,8,1,"ng-container",2),e.qZA()()),2&n&&(e.xp6(2),e.Q6J("ngIf",!t.addPhotoMode),e.xp6(1),e.Q6J("ngIf",t.addPhotoMode))},dependencies:[d.sg,d.O5,T]});class m{constructor(n,t,i,o){this.adminService=n,this.route=t,this.router=i,this.shopService=o,this.carFormValues=new K}ngOnInit(){const n=this.getBrands(),t=this.getTypes();(0,H.D)([t,n]).subscribe(i=>{this.types=i[0],this.brands=i[1]},i=>{console.log(i)},()=>{"edit"===this.route.snapshot.url[0].path&&this.loadCar()})}loadCar(){this.shopService.getCar(+this.route.snapshot.paramMap.get("id")).subscribe(n=>{const t=this.brands&&this.brands.find(o=>o.name===n.carBrand).id,i=this.types&&this.types.find(o=>o.name===n.carType).id;this.car=n,this.carFormValues={...n,carBrandId:t,carTypeId:i}})}getBrands(){return this.shopService.getBrands()}getTypes(){return this.shopService.getTypes()}updatePrice(n){this.carFormValues.price=n}onSubmit(n){if("edit"===this.route.snapshot.url[0].path){const t={...n,...n,price:+n.price};this.adminService.updateCar(t,+this.route.snapshot.paramMap.get("id")).subscribe(i=>{this.router.navigate(["/admin"])})}else{const t={...n,price:+n.price};this.adminService.createCar(t).subscribe(i=>{this.router.navigate(["/admin"])})}}}m.\u0275fac=function(n){return new(n||m)(e.Y36(u),e.Y36(p.gz),e.Y36(p.F0),e.Y36(g.d))},m.\u0275cmp=e.Xpm({type:m,selectors:[["app-edit-car"]],decls:11,vars:4,consts:[[1,"car-edit","mt-5"],[1,"container"],[1,"row"],[1,"col-12"],[1,"tab-panel"],[1,"car-tabset"],["heading","Edit Car"],[1,"col-lg-6"],[3,"car","types","brands"],["heading","Edit Photos"],[3,"car"]],template:function(n,t){1&n&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"tabset",5)(6,"tab",6)(7,"div",7),e._UZ(8,"app-edit-car-form",8),e.qZA()(),e.TgZ(9,"tab",9),e._UZ(10,"app-edit-car-photos",10),e.qZA()()()()()()()),2&n&&(e.xp6(8),e.Q6J("car",t.carFormValues)("types",t.types)("brands",t.brands),e.xp6(2),e.Q6J("car",t.car))},dependencies:[w.wW,w.AH,Z,x]});const ue=function(r){return["edit",r]};function ge(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td",17),e._uU(2),e.qZA(),e.TgZ(3,"th",17)(4,"h5"),e._uU(5),e.qZA()(),e.TgZ(6,"td",17)(7,"button",18),e._uU(8,"Edit"),e.qZA()(),e.TgZ(9,"td",17)(10,"button",19),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.deleteType(a.id))}),e._uU(11,"Delete"),e.qZA()()()}if(2&r){const t=n.$implicit;e.xp6(2),e.Oqu(t.id),e.xp6(3),e.Oqu(t.name),e.xp6(2),e.Q6J("routerLink",e.VKq(3,ue,t.id))}}function me(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",20)(1,"app-pager",21),e.NdJ("pageChanged",function(o){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onPageChanged(o))}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("pageSize",t.shopParams.pageSize)("pageNumber",t.shopParams.pageNumber)("totalCount",t.totalCount)}}const he=function(){return["/admin/typecreate"]};function _e(r,n){if(1&r&&(e.TgZ(0,"section",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"header",6),e._uU(6,"Type List"),e.qZA(),e.TgZ(7,"button",7),e._uU(8,"Create new type"),e.qZA()(),e._UZ(9,"app-paging-header",8),e.TgZ(10,"div",9)(11,"table",10)(12,"thead")(13,"tr")(14,"th",11)(15,"div",12),e._uU(16,"Id"),e.qZA()(),e.TgZ(17,"th",11)(18,"div",13),e._uU(19,"Name"),e.qZA()(),e.TgZ(20,"th",11)(21,"div",14),e._uU(22,"Edit"),e.qZA()(),e.TgZ(23,"th",11)(24,"div",14),e._uU(25,"Delete"),e.qZA()()()(),e.TgZ(26,"tbody"),e.YNc(27,ge,12,5,"tr",15),e.qZA()()(),e.YNc(28,me,2,3,"div",16),e.qZA()()()()),2&r){const t=e.oxw();e.xp6(7),e.Q6J("routerLink",e.DdM(6,he)),e.xp6(2),e.Q6J("totalCount",t.totalCount)("pageSize",t.shopParams.pageSize)("pageNumber",t.shopParams.pageNumber),e.xp6(18),e.Q6J("ngForOf",t.types),e.xp6(1),e.Q6J("ngIf",t.totalCount>0)}}class y{constructor(n,t){this.shopService=n,this.adminService=t,this.shopParams=this.shopService.getShopParams()}ngOnInit(){this.getCarTypes()}getCarTypes(n=!1){this.shopService.getTypes().subscribe(t=>{this.types=t},t=>{console.log(t)})}onPageChanged(n){const t=this.shopService.getShopParams();t.pageNumber!==n&&(t.pageNumber=n,this.shopService.setShopParams(t),this.getCarTypes(!0))}deleteType(n){this.adminService.deleteType(n).subscribe(t=>{this.types.splice(this.types.findIndex(i=>i.id===n),1),this.totalCount--})}}y.\u0275fac=function(n){return new(n||y)(e.Y36(g.d),e.Y36(u))},y.\u0275cmp=e.Xpm({type:y,selectors:[["app-list-type"]],decls:1,vars:1,consts:[["class","admin-page",4,"ngIf"],[1,"admin-page"],[1,"container"],[1,"row"],[1,"col-lg-12"],[1,"d-flex","justify-content-between","my-3"],[1,"h2"],[1,"btn","btn-outline-success",3,"routerLink"],[3,"totalCount","pageSize","pageNumber"],[1,"table-responsive"],[1,"table"],["scope","col"],[1,"p-2"],[1,"py-2","text-uppercase"],[1,"p-2","px-3","text-uppercase"],[4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"align-middle"],[1,"btn","btn-warning",3,"routerLink"],[1,"btn","btn-danger",3,"click"],[1,"d-flex","justify-content-center"],[3,"pageSize","pageNumber","totalCount","pageChanged"]],template:function(n,t){1&n&&e.YNc(0,_e,29,7,"section",0),2&n&&e.Q6J("ngIf",t.types)},dependencies:[d.sg,d.O5,S.U,J.P,p.rH],styles:[".align-middle[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:center}"]});class be{constructor(n){this.name="",Object.assign(this,n)}}function fe(r,n){1&r&&(e.TgZ(0,"div"),e._uU(1," Type Name is required "),e.qZA())}function Ce(r,n){if(1&r&&(e.TgZ(0,"div",13),e.YNc(1,fe,2,0,"div",14),e.qZA()),2&r){e.oxw();const t=e.MAs(11);e.xp6(1),e.Q6J("ngIf",t.errors.required)}}const ve=function(r){return{"is-invalid":r}};class h{constructor(n,t,i,o){this.adminService=n,this.route=t,this.router=i,this.shopService=o,this.type=new be}ngOnInit(){"type"===this.route.snapshot.url[0].path&&this.loadType()}loadType(){localStorage.getItem("firstReload")&&"true"!=localStorage.getItem("firstReload")?(localStorage.setItem("firstReload","true"),this.shopService.getType(+this.route.snapshot.paramMap.get("id")).subscribe(n=>{this.type={...n}})):(localStorage.setItem("firstReload","false"),window.location.reload())}onSubmit(n){if("type"===this.route.snapshot.url[0].path){console.log(this.route.snapshot.url[0]);const t={...n};this.adminService.updateType(t,+this.route.snapshot.paramMap.get("id")).subscribe(i=>{this.router.navigate(["/admin/type"])})}else{const t={...n};this.adminService.createType(t).subscribe(i=>{window.location.href="/admin/type"})}}}h.\u0275fac=function(n){return new(n||h)(e.Y36(u),e.Y36(p.gz),e.Y36(p.F0),e.Y36(g.d))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-edit-type"]],decls:15,vars:6,consts:[[1,"type-edit","mt-5"],[1,"container"],[1,"row"],[1,"col-lg-8"],[3,"ngSubmit"],["typeForm","ngForm"],[1,"form-row"],[1,"form-group","col-md-6"],["for","name"],["required","","type","text","id","name","placeholder","Type Name","name","name",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["name","ngModel"],["class","invalid-feedback",4,"ngIf"],["type","submit",1,"btn","btn-primary","my-3","float-right",3,"disabled"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4,5),e.NdJ("ngSubmit",function(){e.CHM(i);const a=e.MAs(5);return e.KtG(t.onSubmit(a.valid&&a.value))}),e.TgZ(6,"div",6)(7,"div",7)(8,"label",8),e._uU(9,"Type Name"),e.qZA(),e.TgZ(10,"input",9,10),e.NdJ("ngModelChange",function(a){return t.type.name=a}),e.qZA(),e.YNc(12,Ce,2,1,"div",11),e.TgZ(13,"button",12),e._uU(14,"Submit"),e.qZA()()()()()()()()}if(2&n){const i=e.MAs(5),o=e.MAs(11);e.xp6(10),e.Q6J("ngClass",e.VKq(4,ve,o.invalid&&(o.dirty||o.touched)))("ngModel",t.type.name),e.xp6(2),e.Q6J("ngIf",o.invalid&&(o.dirty||o.touched)),e.xp6(1),e.Q6J("disabled",!i.valid)}},dependencies:[d.mk,d.O5,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.On,s.F]});const Ze=function(r){return["edit",r]};function Te(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td",17),e._uU(2),e.qZA(),e.TgZ(3,"th",17)(4,"h5"),e._uU(5),e.qZA()(),e.TgZ(6,"td",17)(7,"button",18),e._uU(8,"Edit"),e.qZA()(),e.TgZ(9,"td",17)(10,"button",19),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.deleteBrand(a.id))}),e._uU(11,"Delete"),e.qZA()()()}if(2&r){const t=n.$implicit;e.xp6(2),e.Oqu(t.id),e.xp6(3),e.Oqu(t.name),e.xp6(2),e.Q6J("routerLink",e.VKq(3,Ze,t.id))}}function xe(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",20)(1,"app-pager",21),e.NdJ("pageChanged",function(o){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onPageChanged(o))}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("pageSize",t.shopParams.pageSize)("pageNumber",t.shopParams.pageNumber)("totalCount",t.totalCount)}}const ye=function(){return["/admin/createbrand"]};function Ae(r,n){if(1&r&&(e.TgZ(0,"section",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"header",6),e._uU(6,"Brand List"),e.qZA(),e.TgZ(7,"button",7),e._uU(8,"Create new brand"),e.qZA()(),e._UZ(9,"app-paging-header",8),e.TgZ(10,"div",9)(11,"table",10)(12,"thead")(13,"tr")(14,"th",11)(15,"div",12),e._uU(16,"Id"),e.qZA()(),e.TgZ(17,"th",11)(18,"div",13),e._uU(19,"Name"),e.qZA()(),e.TgZ(20,"th",11)(21,"div",14),e._uU(22,"Edit"),e.qZA()(),e.TgZ(23,"th",11)(24,"div",14),e._uU(25,"Delete"),e.qZA()()()(),e.TgZ(26,"tbody"),e.YNc(27,Te,12,5,"tr",15),e.qZA()()(),e.YNc(28,xe,2,3,"div",16),e.qZA()()()()),2&r){const t=e.oxw();e.xp6(7),e.Q6J("routerLink",e.DdM(6,ye)),e.xp6(2),e.Q6J("totalCount",t.totalCount)("pageSize",t.shopParams.pageSize)("pageNumber",t.shopParams.pageNumber),e.xp6(18),e.Q6J("ngForOf",t.brands),e.xp6(1),e.Q6J("ngIf",t.totalCount>0)}}class A{constructor(n,t){this.shopService=n,this.adminService=t,this.shopParams=this.shopService.getShopParams()}ngOnInit(){this.getCarBrands()}getCarBrands(n=!1){this.shopService.getBrands().subscribe(t=>{this.brands=t},t=>{console.log(t)})}deleteBrand(n){this.adminService.deleteBrand(n).subscribe(t=>{this.brands.splice(this.brands.findIndex(i=>i.id===n),1),this.totalCount--})}onPageChanged(n){const t=this.shopService.getShopParams();t.pageNumber!==n&&(t.pageNumber=n,this.shopService.setShopParams(t),this.getCarBrands(!0))}}A.\u0275fac=function(n){return new(n||A)(e.Y36(g.d),e.Y36(u))},A.\u0275cmp=e.Xpm({type:A,selectors:[["app-list-brand"]],decls:1,vars:1,consts:[["class","admin-page",4,"ngIf"],[1,"admin-page"],[1,"container"],[1,"row"],[1,"col-lg-12"],[1,"d-flex","justify-content-between","my-3"],[1,"h2"],[1,"btn","btn-outline-success",3,"routerLink"],[3,"totalCount","pageSize","pageNumber"],[1,"table-responsive"],[1,"table"],["scope","col"],[1,"p-2"],[1,"py-2","text-uppercase"],[1,"p-2","px-3","text-uppercase"],[4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"align-middle"],[1,"btn","btn-warning",3,"routerLink"],[1,"btn","btn-danger",3,"click"],[1,"d-flex","justify-content-center"],[3,"pageSize","pageNumber","totalCount","pageChanged"]],template:function(n,t){1&n&&e.YNc(0,Ae,29,7,"section",0),2&n&&e.Q6J("ngIf",t.brands)},dependencies:[d.sg,d.O5,S.U,J.P,p.rH]});class qe{constructor(n){this.name="",Object.assign(this,n)}}function Ue(r,n){1&r&&(e.TgZ(0,"div"),e._uU(1," Brand Name is required "),e.qZA())}function Me(r,n){if(1&r&&(e.TgZ(0,"div",13),e.YNc(1,Ue,2,0,"div",14),e.qZA()),2&r){e.oxw();const t=e.MAs(11);e.xp6(1),e.Q6J("ngIf",t.errors.required)}}const Fe=function(r){return{"is-invalid":r}};class _{constructor(n,t,i,o){this.adminService=n,this.route=t,this.router=i,this.shopService=o,this.brand=new qe}ngOnInit(){"brand"===this.route.snapshot.url[0].path&&"create"===this.route.snapshot.url[1].path&&this.loadBrand()}loadBrand(){localStorage.getItem("firstReload")&&"true"!=localStorage.getItem("firstReload")?(localStorage.setItem("firstReload","true"),this.shopService.getBrand(+this.route.snapshot.paramMap.get("id")).subscribe(n=>{this.brand={...n}})):(localStorage.setItem("firstReload","false"),window.location.reload())}onSubmit(n){if("brand"===this.route.snapshot.url[0].path){console.log(this.route.snapshot.url[0]);const t={...n};this.adminService.updateBrand(t,+this.route.snapshot.paramMap.get("id")).subscribe(i=>{this.router.navigate(["/admin/brand"])})}else{const t={...n};this.adminService.createBrand(t).subscribe(i=>{window.location.href="/admin/brand"})}}}function Se(r,n){if(1&r&&(e.TgZ(0,"tr",6)(1,"th"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"currency"),e.qZA(),e.TgZ(9,"td",7),e._uU(10),e.qZA()()),2&r){const t=n.$implicit;e.MGl("routerLink","/admin/orders/",t.id,""),e.xp6(2),e.hij("# ",t.id,""),e.xp6(2),e.Oqu(e.xi3(5,5,t.orderDate,"medium")),e.xp6(3),e.Oqu(e.lcZ(8,8,t.total)),e.xp6(3),e.Oqu(t.status)}}_.\u0275fac=function(n){return new(n||_)(e.Y36(u),e.Y36(p.gz),e.Y36(p.F0),e.Y36(g.d))},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-edit-brand"]],decls:15,vars:6,consts:[[1,"type-edit","mt-5"],[1,"container"],[1,"row"],[1,"col-lg-8"],[3,"ngSubmit"],["brandForm","ngForm"],[1,"form-row"],[1,"form-group","col-md-6"],["for","name"],["required","","type","text","id","name","placeholder","Brand Name","name","name",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["name","ngModel"],["class","invalid-feedback",4,"ngIf"],["type","submit",1,"btn","btn-primary","my-3","float-right",3,"disabled"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4,5),e.NdJ("ngSubmit",function(){e.CHM(i);const a=e.MAs(5);return e.KtG(t.onSubmit(a.valid&&a.value))}),e.TgZ(6,"div",6)(7,"div",7)(8,"label",8),e._uU(9,"Brand Name"),e.qZA(),e.TgZ(10,"input",9,10),e.NdJ("ngModelChange",function(a){return t.brand.name=a}),e.qZA(),e.YNc(12,Me,2,1,"div",11),e.TgZ(13,"button",12),e._uU(14,"Submit"),e.qZA()()()()()()()()}if(2&n){const i=e.MAs(5),o=e.MAs(11);e.xp6(10),e.Q6J("ngClass",e.VKq(4,Fe,o.invalid&&(o.dirty||o.touched)))("ngModel",t.brand.name),e.xp6(2),e.Q6J("ngIf",o.invalid&&(o.dirty||o.touched)),e.xp6(1),e.Q6J("disabled",!i.valid)}},dependencies:[d.mk,d.O5,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.On,s.F]});class q{constructor(n){this.adminService=n}ngOnInit(){this.getOrdersForAdmin()}getOrdersForAdmin(){this.adminService.getOrdersForAdmin().subscribe(n=>{this.orders=n},n=>{console.log(n)})}}q.\u0275fac=function(n){return new(n||q)(e.Y36(u))},q.\u0275cmp=e.Xpm({type:q,selectors:[["app-edit-orders"]],inputs:{orders:"orders"},decls:16,vars:1,consts:[[1,"container","mt-5"],[1,"row"],[1,"col-12"],[1,"table","table-hover",2,"cursor","pointer"],[1,"thead-light"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"],[1,"px-3"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"table",3)(4,"thead",4)(5,"tr")(6,"th"),e._uU(7,"Order"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Date"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Total"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Payment Status"),e.qZA()()(),e.TgZ(14,"tbody"),e.YNc(15,Se,11,10,"tr",5),e.qZA()()()()()),2&n&&(e.xp6(15),e.Q6J("ngForOf",t.orders))},dependencies:[d.sg,p.rH,d.H9,d.uU]});var Je=c(8909);function Oe(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"tr",18)(1,"td",19)(2,"input",20),e.NdJ("ngModelChange",function(o){const l=e.CHM(t).$implicit;return e.KtG(l.carReturned=o)})("click",function(o){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onCheckCarReturned(o))}),e.qZA()(),e.TgZ(3,"td",21)(4,"strong"),e._uU(5),e.ALo(6,"date"),e.qZA()(),e.TgZ(7,"td",21)(8,"strong"),e._uU(9),e.ALo(10,"date"),e.qZA()(),e.TgZ(11,"td",22)(12,"strong",23),e._uU(13),e.ALo(14,"currency"),e.qZA()(),e.TgZ(15,"td",24)(16,"div",25),e._UZ(17,"img",26),e.TgZ(18,"div",27)(19,"h5",28)(20,"a",29),e._uU(21),e.qZA()()()()(),e.TgZ(22,"td",19)(23,"strong",25),e._uU(24),e.ALo(25,"currency"),e.qZA()(),e.TgZ(26,"td",19)(27,"span",30),e._uU(28),e.qZA()()()}if(2&r){const t=n.$implicit;e.xp6(2),e.Q6J("ngModel",t.carReturned),e.xp6(3),e.Oqu(e.xi3(6,10,t.rentDate,"medium")),e.xp6(4),e.Oqu(e.xi3(10,13,t.returnDate,"medium")),e.xp6(4),e.Oqu(e.lcZ(14,16,t.lateReturnedFee)),e.xp6(4),e.s9C("src",t.pictureUrl,e.LSH),e.s9C("alt",t.productName),e.xp6(3),e.MGl("routerLink","/car/",t.carId,""),e.xp6(1),e.hij("",t.carName," "),e.xp6(3),e.Oqu(e.lcZ(25,18,t.price)),e.xp6(4),e.Oqu(t.quantity)}}function Ne(r,n){if(1&r&&(e.TgZ(0,"ul",31)(1,"li",32)(2,"strong",33),e._uU(3,"Daily price:"),e.qZA(),e.TgZ(4,"strong",33),e._uU(5),e.ALo(6,"currency"),e.qZA()(),e.TgZ(7,"li",32)(8,"strong",33),e._uU(9,"Rented days:"),e.qZA(),e.TgZ(10,"strong",33),e._uU(11),e.qZA()(),e.TgZ(12,"li",32)(13,"strong",33),e._uU(14,"Order Total"),e.qZA(),e.TgZ(15,"strong",33),e._uU(16),e.ALo(17,"currency"),e.qZA()()()),2&r){const t=n.$implicit,i=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,3,t.price)),e.xp6(6),e.Oqu(t.days),e.xp6(5),e.Oqu(e.lcZ(17,5,i.orders.total))}}function we(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div")(3,"div",4)(4,"table",5)(5,"thead",6)(6,"tr")(7,"th",7)(8,"div",8),e._uU(9,"Returned"),e.qZA()(),e.TgZ(10,"th",7)(11,"div",9),e._uU(12,"Rent Date"),e.qZA()(),e.TgZ(13,"th",7)(14,"div",9),e._uU(15,"Return Date"),e.qZA()(),e.TgZ(16,"th",7)(17,"div",8),e._uU(18,"Late Fee"),e.qZA()(),e.TgZ(19,"th",7)(20,"div",10),e._uU(21,"Car"),e.qZA()(),e.TgZ(22,"th",7)(23,"div",8),e._uU(24,"Price"),e.qZA()(),e.TgZ(25,"th",7)(26,"div",8),e._uU(27,"Quantity"),e.qZA()()()(),e.TgZ(28,"tbody"),e.YNc(29,Oe,29,20,"tr",11),e.qZA()()()(),e.TgZ(30,"button",12),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.orderDetails())}),e._uU(31,"Back to Orders"),e.qZA()(),e.TgZ(32,"div",13)(33,"div",14),e._uU(34,"Order Summary"),e.qZA(),e.TgZ(35,"div",15),e.YNc(36,Ne,18,7,"ul",16),e.qZA(),e.TgZ(37,"div",17),e._uU(38),e.qZA()()()}if(2&r){const t=e.oxw();e.xp6(29),e.Q6J("ngForOf",t.orders.orderItems),e.xp6(7),e.Q6J("ngForOf",t.orders.orderItems),e.xp6(2),e.hij(" ",t.availableMessage," ")}}class U{constructor(n,t,i,o){this.router=n,this.route=t,this.breadcrumbService=i,this.adminService=o,this.returned=!1,this.available=!1,this.breadcrumbService.set("@OrderDetailed","")}ngOnInit(){this.adminService.getOrderDetailedForAdmin(+this.route.snapshot.paramMap.get("id")).subscribe(n=>{this.orders=n,this.breadcrumbService.set("@OrderDetailed",`Order# ${n.id} - ${n.status}`)},n=>{console.log(n)})}orderDetails(){this.router.navigateByUrl("admin/orders")}onCheckCarReturned(n){this.route.paramMap.subscribe(t=>{this.id=t.get("id")}),this.adminService.getOrderDetailedForAdmin(this.id).subscribe(t=>{this.orderItems=t,this.returned=!0,this.available=!0,this.adminService.checkCarReturned(this.id,this.returned).subscribe(()=>{window.location.reload()})})}}U.\u0275fac=function(n){return new(n||U)(e.Y36(p.F0),e.Y36(p.gz),e.Y36(Je.pm),e.Y36(u))},U.\u0275cmp=e.Xpm({type:U,selectors:[["app-edit-order-details"]],inputs:{orders:"orders",ordersForAdmin:"ordersForAdmin",orderItems:"orderItems"},decls:2,vars:1,consts:[[1,"container","mt-5"],["class","row",4,"ngIf"],[1,"row"],[1,"col-8"],[1,"table-responsive"],[1,"table","table-bordered"],[1,"thead-dark","py-0"],["scope","col"],[1,"py-2","text-uppercase"],[1,"py-2","ml-4","text-uppercase"],[1,"py-2","px-5","text-uppercase"],["class","border-0",4,"ngFor","ngForOf"],[1,"btn","btn-dark",2,"margin-top","20px",3,"click"],[1,"col-4"],[1,"bg-light","px-4","py-3","text-uppercase","font-weight-bold"],[1,"p-4"],["class","list-unstyled mb-1",4,"ngFor","ngForOf"],[1,"text-danger"],[1,"border-0"],[1,"align-middle"],["type","checkbox","name","returned",2,"margin-left","40px",3,"ngModel","ngModelChange","click"],[1,"align-middle","p-2"],[1,"align-middle",2,"align-content","center"],[1,"px-4"],["scope","row"],[1,"p-2"],[1,"img-fluid",2,"max-height","50px",3,"src","alt"],[1,"ml-3","d-inline-block","align-middle"],[1,"mb-0"],["id","txtCarName",1,"text-uppercase",3,"routerLink"],[1,"font-weight-bold","px-5"],[1,"list-unstyled","mb-1"],[1,"d-flex","justify-content-between","py-3","border-bottom"],[1,"text-muted"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.YNc(1,we,39,3,"div",1),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngIf",t.orders))},dependencies:[d.sg,d.O5,s.Wl,s.JJ,s.On,p.rH,d.H9,d.uU]});const Ee=[{path:"",component:v},{path:"carcreate",component:m,data:{breadcrumb:"Create"}},{path:"edit/:id",component:m,data:{breadcrumb:"Edit"}},{path:"type",component:y},{path:"typecreate",component:h,data:{breadcrumb:"Create Type"}},{path:"type/edit/:id",component:h,data:{breadcrumb:"Edit Type"}},{path:"brand",component:A,data:{breadcrumb:"Create Brand"}},{path:"createbrand",component:_,data:{breadcrumb:"Create Brand"}},{path:"brand/edit/:id",component:_,data:{breadcrumb:"Edit Brand"}},{path:"orders",component:q,data:{breadcrumb:"Orders"}},{path:"orders/:id",component:U,data:{breadcrumb:{alias:"OrderDetailed"}}}];class b{}b.\u0275fac=function(n){return new(n||b)},b.\u0275mod=e.oAB({type:b}),b.\u0275inj=e.cJS({imports:[p.Bz.forChild(Ee),p.Bz]});class f{}f.\u0275fac=function(n){return new(n||f)},f.\u0275mod=e.oAB({type:f}),f.\u0275inj=e.cJS({imports:[d.ez,P.m,b,s.u5]})}}]);